(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3785"],{Et4L:function(t,e,r){"use strict";r.r(e);var a=r("14Xm"),o=r.n(a),n=r("D3Ub"),i=r.n(n),c=r("Aeqt"),s=r("THlk"),u={name:"ProductEditor",data:function(){return{product:{name:"",descriptions:"",price:0,quantity:10,coverImg:""},rules:{name:{required:!0,message:"请输入商品名称",trigger:"blur"},quantity:[{required:!0,message:"请输入商品库存",trigger:"blur"},{validator:function(t,e,r){return e?/^[0-9]*[1-9][0-9]*$/.test(e)?e<0?r(new Error("库存不能小于0")):void r():r(new Error("请输入整数")):r(new Error("请填写整数"))},trigger:"blur"}]}}},computed:{coverImgShow:function(){return c.a+this.product.coverImg},fileUploadUrl:function(){return c.a+"/api/v1/common/file_upload"}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(){var t=i()(o.a.mark(function t(r){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}return t.next=3,Object(s.a)(e.product);case 3:"error"===(a=t.sent).code?e.$notify({title:"警告",message:a.message,type:"warning"}):e.$router.push({name:"ProductList"}),t.next=9;break;case 7:return console.log("error submit!!"),t.abrupt("return",!1);case 9:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())},resetForm:function(t){this.product.coverImg="",this.$refs[t].resetFields()},handleAvatarSuccess:function(t,e){this.product.coverImg=t.info},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,r=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&r}}},l=(r("H4kt"),r("KHd+")),p=Object(l.a)(u,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"productForm",attrs:{model:t.product,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"商品名字",prop:"name"}},[r("el-input",{model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"商品简介",prop:"descriptions"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.product.descriptions,callback:function(e){t.$set(t.product,"descriptions",e)},expression:"product.descriptions"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"价格",prop:"price"}},[r("el-col",{attrs:{span:4}},[r("el-input",{model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",t._n(e))},expression:"product.price"}},[r("template",{slot:"append"},[t._v("元")])],2)],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"库存",prop:"quantity"}},[r("el-col",{attrs:{span:2}},[r("el-input",{model:{value:t.product.quantity,callback:function(e){t.$set(t.product,"quantity",t._n(e))},expression:"product.quantity"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"主图",prop:"price"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,action:t.fileUploadUrl,name:"file"}},[t.product.coverImg?r("img",{staticClass:"avatar",attrs:{src:t.coverImgShow}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("productForm")}}},[t._v("立即创建")]),t._v(" "),r("el-button",{on:{click:function(e){t.resetForm("productForm")}}},[t._v("重置")])],1)],1)],1)},[],!1,null,"c915fed6",null);p.options.__file="editor.vue";e.default=p.exports},Fq0O:function(t,e,r){},H4kt:function(t,e,r){"use strict";var a=r("Fq0O");r.n(a).a},THlk:function(t,e,r){"use strict";r.d(e,"b",function(){return i}),r.d(e,"a",function(){return c});var a=r("t3Un"),o=r("X4fA"),n=r("Aeqt");function i(t){return Object(a.a)(n.a+"/api/v1/admin/products",{headers:{authorization:"Bearer "+Object(o.a)()},params:t})}function c(t){return Object(a.b)(n.a+"/api/v1/admin/products",t,{headers:{authorization:"Bearer "+Object(o.a)()}})}}}]);